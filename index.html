<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Temp</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="app">
    <h1>Temp</h1>
    <!-- ì‚¬ìš©ì ì…ë ¥ì°½: ë„ì‹œ ì´ë¦„ ì…ë ¥ -->
    <input type="text" id="cityInput" placeholder="Enter city name" />

    <!-- ê²€ìƒ‰ ë²„íŠ¼ -->
    <button id="searchBtn">Search</button>

    <!-- í€´ì¦ˆ ë²„íŠ¼: ë‚ ì”¨ ê²€ìƒ‰ í›„ í™œì„±í™” -->
    <button id="quizBtn" disabled>Quiz</button>

    <!-- ë‚ ì”¨ ì •ë³´ë¥¼ í‘œì‹œí•  ì˜ì—­ -->
    <div id="weather">Enter a city to see the weather.<br>(ë³´ê³ ì‹¶ì€ ë„ì‹œì˜ ë‚ ì”¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”.)</div>

    <!-- í€´ì¦ˆë¥¼ í‘œì‹œí•  ì˜ì—­, ê¸°ë³¸ì€ ìˆ¨ê¹€ -->
    <div id="quiz" style="display: none;"></div>
  </div>

  <script>
    // OpenWeatherMap API í‚¤
    const API_KEY = 'ë°œê¸‰ë°›ì€ í‚¤';

    // ë‚ ì”¨ ê´€ë ¨ í€´ì¦ˆ ë°ì´í„° ë°°ì—´
    const quizzes = [
      {
        question: "íƒœì–‘ê³„ì—ì„œ ê°€ì¥ í° í­í’ì€ ì–´ëŠ í–‰ì„±ì—ì„œ ë°œìƒí•˜ë‚˜ìš”?",
        options: ["ì§€êµ¬", "ëª©ì„±", "í™”ì„±"],
        answer: "ëª©ì„±"
      },
      {
        question: "ëŒ€ê¸°ì˜ ì£¼ìš” êµ¬ì„± ìš”ì†ŒëŠ” ë¬´ì—‡ì¸ê°€ìš”?",
        options: ["ì§ˆì†Œì™€ ì‚°ì†Œ", "ì´ì‚°í™”íƒ„ì†Œ", "ìˆ˜ì†Œ"],
        answer: "ì§ˆì†Œì™€ ì‚°ì†Œ"
      },
      {
        question: "ê¸°ì••ì´ ë†’ì•„ì§ˆìˆ˜ë¡ ë‚ ì”¨ëŠ” ë³´í†µ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?",
        options: ["íë¦¼", "ë§‘ìŒ", "ëˆˆ"],
        answer: "ë§‘ìŒ"
      },
      {
        question: "ê°€ì¥ ë†’ì€ ì˜¨ë„ë¥¼ ê¸°ë¡í•œ ì§€êµ¬ìƒì˜ ì¥ì†ŒëŠ” ì–´ë””ì¸ê°€ìš”?",
        options: ["ë¯¸êµ­ì˜ ë°ìŠ¤ë°¸ë¦¬", "ì‚¬í•˜ë¼ ì‚¬ë§‰", "íŠ€ë‹ˆì§€ì˜ ì¼€ë¹Œë¦¬"],
        answer: "ë¯¸êµ­ì˜ ë°ìŠ¤ë°¸ë¦¬"
      },
      {
        question: "ë²ˆê°œê°€ ë°œìƒí•  ë•Œ ë™ë°˜ë˜ëŠ” ì†Œë¦¬ëŠ” ë¬´ì—‡ì´ë¼ê³  í•˜ë‚˜ìš”?",
        options: ["í­í’", "ì²œë‘¥", "ë²ˆê°œìŒ"],
        answer: "ì²œë‘¥"
      },
      {
        question: "ë¶ê·¹ì˜ ê²¨ìš¸ì²  íƒœì–‘ì´ ëœ¨ì§€ ì•ŠëŠ” í˜„ìƒì„ ë¬´ì—‡ì´ë¼ê³  í•˜ë‚˜ìš”?",
        options: ["ë°±ì•¼", "ë¶ê·¹ì„±", "ê·¹ì•¼"],
        answer: "ê·¹ì•¼"
      },
      {
        question: "ì—˜ë‹ˆë‡¨(El NiÃ±o)ëŠ” ì£¼ë¡œ ì–´ë–¤ ëŒ€ì–‘ì—ì„œ ë°œìƒí•˜ë‚˜ìš”?",
        options: ["ëŒ€ì„œì–‘", "íƒœí‰ì–‘", "ì¸ë„ì–‘"],
        answer: "íƒœí‰ì–‘"
      },
      {
        question: "ë¹„ê°€ ë‚´ë¦´ ë•Œ ê°€ì¥ ë§ì´ ë–¨ì–´ì§€ëŠ” ë¬¼ë°©ìš¸ í¬ê¸°ëŠ” ëŒ€ëµ ì–¼ë§ˆì¼ê¹Œìš”?",
        options: ["0.5mm", "2mm", "5mm"],
        answer: "2mm"
      },
      {
        question: "íƒœí’ê³¼ í—ˆë¦¬ì¼€ì¸ì˜ ì°¨ì´ì ì€ ë¬´ì—‡ì¸ê°€ìš”?",
        options: ["ê°•ë„", "í¬ê¸°", "ë°œìƒì§€ì—­"],
        answer: "ë°œìƒì§€ì—­"
      },
      {
        question: "ì•ˆê°œëŠ” ì£¼ë¡œ ì–´ë–¤ ì¡°ê±´ì—ì„œ ë°œìƒí•˜ë‚˜ìš”?",
        options: ["ê³ ì˜¨ê³¼ ìŠµë„ë†’ìŒ", "ê°•í•œë°”ëŒê³¼ ìŠµë„ë†’ìŒ", "ì €ì˜¨ê³¼ ìŠµë„ë†’ìŒ"],
        answer: "ì €ì˜¨ê³¼ ìŠµë„ë†’ìŒ"
      }
    ];

    // ë‚ ì”¨ ê²€ìƒ‰ í•¨ìˆ˜: ì…ë ¥í•œ ë„ì‹œëª…ìœ¼ë¡œ API í˜¸ì¶œ
    function searchWeather() {
      const city = document.getElementById('cityInput').value; // ë„ì‹œëª… ê°€ì ¸ì˜¤ê¸°

      if (!city) {
        alert('ë„ì‹œëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }

      // OpenWeatherMap API í˜¸ì¶œ URL (í•œê¸€ ì„¤ëª… í¬í•¨, ì„­ì”¨ ë‹¨ìœ„)
      const apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${API_KEY}&units=metric&lang=kr`;

      fetch(apiUrl)
        .then(response => {
          if (!response.ok) {
            // ë„ì‹œëª…ì´ í‹€ë¦¬ê±°ë‚˜ ë°ì´í„° ì—†ì„ ë•Œ ì—ëŸ¬ ì²˜ë¦¬
            throw new Error('City not found');
          }
          return response.json();
        })
        .then(data => {
          displayWeather(data);             // ë‚ ì”¨ ì •ë³´ í™”ë©´ì— í‘œì‹œ
          document.getElementById('quizBtn').disabled = false; // í€´ì¦ˆ ë²„íŠ¼ í™œì„±í™”
        })
        .catch(error => {
          console.error('Error fetching weather data:', error);
          // ì˜¤ë¥˜ ë©”ì‹œì§€ í™”ë©´ì— ì¶œë ¥
          document.getElementById('weather').innerHTML = `<p>${error.message}</p>`;
        });
    }

    // ê²€ìƒ‰ ë²„íŠ¼ í´ë¦­ ì‹œ ë‚ ì”¨ ê²€ìƒ‰ í•¨ìˆ˜ ì‹¤í–‰ ã„±
    document.getElementById('searchBtn').addEventListener('click', searchWeather);

    // ì…ë ¥ì°½ì—ì„œ Enter í‚¤ì…ë ¥ ì‹œ ë‚ ì”¨ ê²€ìƒ‰ í•¨ìˆ˜ ì‹¤í–‰ ã„±
    document.getElementById('cityInput').addEventListener('keydown', (event) => {
      if (event.key === 'Enter') {
        searchWeather();
      }
    });

    // í€´ì¦ˆ ì˜ì—­ í‘œì‹œ/ìˆ¨ê¹€ í† ê¸€ í•¨ìˆ˜
    function toggleQuiz() {
      const quizDiv = document.getElementById('quiz');

      if (quizDiv.style.display === 'none' || quizDiv.style.display === '') {
        quizDiv.style.display = 'block';  // í€´ì¦ˆ ë³´ì´ê¸°
        displayRandomQuiz();               // ëœë¤ í€´ì¦ˆ ë³´ì—¬ì£¼ê¸°
      } else {
        quizDiv.style.display = 'none';   // í€´ì¦ˆ ìˆ¨ê¸°ê¸°
        quizDiv.innerHTML = '';            // í€´ì¦ˆ ë‚´ìš© ì´ˆê¸°í™”
      }
    }

    // ë¬´ì‘ìœ„ í€´ì¦ˆë¥¼ í™”ë©´ì— í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
    function displayRandomQuiz() {
      const quizDiv = document.getElementById('quiz');
      const randomIndex = Math.floor(Math.random() * quizzes.length); // ëœë¤ ì¸ë±ìŠ¤ ì„ íƒ
      const randomQuiz = quizzes[randomIndex];                         // ì„ íƒí•œ í€´ì¦ˆ ê°ì²´

      // í€´ì¦ˆ ë¬¸ì œì™€ ì„ íƒì§€ë¥¼ ë²„íŠ¼ í˜•íƒœë¡œ ìƒì„±
      quizDiv.innerHTML = `
        <h3>Quiz Time!</h3>
        <p>${randomQuiz.question}</p>
        <div id="quizOptions">
          ${randomQuiz.options.map((option, index) => `
            <button onclick="checkAnswer('${option}', '${randomQuiz.answer}', this)">${index + 1}. ${option}</button>
          `).join('')}
        </div>
        <p id="quizResult"></p>
      `;
    }

    // í€´ì¦ˆ ì •ë‹µ í™•ì¸ í•¨ìˆ˜
    function checkAnswer(selectedOption, correctAnswer, button) {
      const resultDiv = document.getElementById('quizResult');

      if (selectedOption === correctAnswer) {
        resultDiv.textContent = "ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰";
        resultDiv.style.color = "green";
      } else {
        resultDiv.textContent = "ì˜¤ë‹µì…ë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”! âŒ";
        resultDiv.style.color = "red";
      }

      // ëª¨ë“  ì„ íƒì§€ ë²„íŠ¼ ë¹„í™œì„±í™” (ë‹µë³€ í›„ ì¤‘ë³µ ì„ íƒ ë°©ì§€)
      const buttons = document.querySelectorAll("#quizOptions button");
      buttons.forEach(btn => btn.disabled = true);
    }

    // í€´ì¦ˆ ë²„íŠ¼ í´ë¦­ ì‹œ í€´ì¦ˆ í† ê¸€ í•¨ìˆ˜ ì‹¤í–‰
    document.getElementById('quizBtn').addEventListener('click', toggleQuiz);

    // APIë¡œë¶€í„° ë°›ì€ ë‚ ì”¨ ë°ì´í„°ë¥¼ í™”ë©´ì— í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
    function displayWeather(data) {
      const weatherDiv = document.getElementById('weather');
      const temp = data.main.temp;           // í˜„ì¬ ì˜¨ë„(ì„­ì”¨)
      const windSpeed = data.wind.speed;    // í’ì† (m/s)

      // ì˜¨ë„ë³„ ë§ì¶¤ ë©”ì‹œì§€ ì„¤ì •
      let tempMessage = '';
      if (temp <= 0) {
        tempMessage = 'ë„ˆë¬´ ì¶”ìš°ë‹ˆ ë”°ëœ»í•œ ì˜·ì„ ê¼­ ì…ìœ¼ì„¸ìš”!';
      } else if (temp <= 10) {
        tempMessage = 'ìŒ€ìŒ€í•œ ë‚ ì”¨ì…ë‹ˆë‹¤. ê²‰ì˜·ì„ ì±™ê¸°ì„¸ìš”.';
      } else if (temp <= 20) {
        tempMessage = 'ì ë‹¹íˆ ì„ ì„ í•œ ë‚ ì”¨ë„¤ìš”. ì™¸ì¶œí•˜ê¸° ì¢‹ê² ì–´ìš”!';
      } else if (temp <= 30) {
        tempMessage = 'ë”°ëœ»í•œ ë‚ ì”¨ì…ë‹ˆë‹¤. ê°€ë²¼ìš´ ì˜·ì°¨ë¦¼ë„ ê´œì°®ì•„ìš”.';
      } else {
        tempMessage = 'ë”ìš´ ë‚ ì”¨ì…ë‹ˆë‹¤. ì¶©ë¶„í•œ ìˆ˜ë¶„ ì„­ì·¨ì™€ ì•¼ì™¸í™œë™ì„ ìì œí•´ì£¼ì„¸ìš”.';
      }

      // ë‚ ì”¨ ì •ë³´ HTMLë¡œ ì‘ì„±í•˜ì—¬ í™”ë©´ì— í‘œì‹œ
      weatherDiv.innerHTML = `
        <h2>${data.name}</h2>
        <p>ì˜¨ë„: ${temp}Â°C</p>
        <p>ë‚ ì”¨: ${data.weather[0].description}</p>
        <p>ìŠµë„: ${data.main.humidity}%</p>
        <p>í’ì†: ${windSpeed} m/s</p>
        <img src="https://openweathermap.org/img/wn/${data.weather[0].icon}@2x.png" alt="Weather icon">
        <p><strong>${tempMessage}</strong></p>
      `;
    }
  </script>
</body>

</html>
